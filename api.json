{"definitions":{"recItem":{"required":["url","title","meta"],"properties":{"meta":{"type":"object","required":["rid"],"properties":{"rid":{"type":"string"}}},"url":{"format":"uri","type":"string"},"title":{"type":"string"},"thumbUrl":{"type":"string","format":"uri"},"description":{"type":"string"},"type":{"enum":["recommendation","promo","advertisement","exchange"]}},"type":"object"},"event":{"type":"object","required":["type","url"],"properties":{"rid":{"type":"string"},"meta":{"type":"object"},"type":{"type":"string","enum":["hit","view","click","like","dislike","share","comment"]},"ts":{"type":"string","pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?"},"rgid":{"type":"string"},"url":{"format":"uri","type":"string"}}},"eventsRequest":{"items":{"allOf":[{"required":["type","url"],"properties":{"meta":{"type":"object"},"rid":{"type":"string"},"url":{"type":"string","format":"uri"},"rgid":{"type":"string"},"ts":{"type":"string","pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?"},"type":{"type":"string","enum":["hit","view","click","like","dislike","share","comment"]}},"type":"object"},{"required":["uniqueID","clientIP","ts"],"properties":{"uniqueID":{"minLength":1,"type":"string"},"userAgent":{"type":"string"},"clientIP":{"format":"ipv4","type":"string"}}}]},"type":"array","minItems":1,"maxItems":1000},"recGroup":{"type":"object","properties":{"meta":{"type":"object"},"recs":{"type":"array","items":{"properties":{"meta":{"type":"object","required":["rid"],"properties":{"rid":{"type":"string"}}},"url":{"format":"uri","type":"string"},"title":{"type":"string"},"thumbUrl":{"type":"string","format":"uri"},"description":{"type":"string"},"type":{"enum":["recommendation","promo","advertisement","exchange"]}},"required":["url","title","meta"],"type":"object"}}}},"click":{"allOf":[{"type":"object","required":["type","url"],"properties":{"ts":{"type":"string","pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?"},"type":{"enum":["hit","view","click","like","dislike","share","comment"],"type":"string"},"url":{"format":"uri","type":"string"},"rgid":{"type":"string"},"rid":{"type":"string"},"meta":{"type":"object"}}},{"required":["rid"],"properties":{"type":{"enum":["click"]}}}],"type":"object"},"recommendationRequest":{"properties":{"url":{"format":"uri","type":"string"},"history":{"items":{"format":"uri","maxItems":20,"type":"string"},"type":"array"},"seed":{"type":"string"},"advBlocksCount":{"type":"integer"},"algorithms":{"items":{"required":["id"],"properties":{"limit":{"type":"integer"},"id":{"type":"integer"}},"type":"object"},"type":"array"},"illustrationType":{"enum":["original","standard","wide","ultraWide","square","vertical"]},"onlyAdsNeeded":{"type":"boolean"},"limit":{"type":"integer"}},"required":["url","limit"],"type":"object"},"view":{"allOf":[{"properties":{"rgid":{"type":"string"},"url":{"format":"uri","type":"string"},"ts":{"type":"string","pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?"},"type":{"enum":["hit","view","click","like","dislike","share","comment"],"type":"string"},"meta":{"type":"object"},"rid":{"type":"string"}},"required":["type","url"],"type":"object"},{"properties":{"type":{"enum":["view"]}},"required":["rgid"]}],"type":"object"},"algorithm":{"properties":{"limit":{"type":"integer"},"id":{"type":"integer"}},"required":["id"],"type":"object"}},"swagger":"2.0","paths":{"\/events":{"post":{"produces":["application\/json"],"x-mojo-to":"rest_api-v3#event","summary":"register new events","responses":{"400":{"description":"Bad Request"},"202":{"examples":{"application\/json":{"status":"ok"}},"description":""},"500":{"description":"Internal server error"},"401":{"description":"Authorization failed"}},"operationId":"v3_events","x-relap-batch":1,"parameters":[{"type":"string","name":"Authorization","in":"header","required":1,"minLength":1,"pattern":"[A-Z][a-z-]+ [A-Za-z0-9]+"},{"required":1,"schema":{"minItems":1,"items":{"allOf":[{"required":["type","url"],"properties":{"meta":{"type":"object"},"rid":{"type":"string"},"url":{"type":"string","format":"uri"},"rgid":{"type":"string"},"ts":{"type":"string","pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?"},"type":{"type":"string","enum":["hit","view","click","like","dislike","share","comment"]}},"type":"object"},{"required":["uniqueID","clientIP","ts"],"properties":{"uniqueID":{"minLength":1,"type":"string"},"userAgent":{"type":"string"},"clientIP":{"format":"ipv4","type":"string"}}}]},"type":"array","maxItems":1000},"name":"json","in":"body"}]}},"\/recs":{"post":{"parameters":[{"type":"string","name":"X-Relap-Unique","in":"header","minLength":1,"required":1},{"name":"X-Real-IP","type":"string","in":"header","required":1,"format":"ipv4"},{"required":1,"in":"header","type":"string","name":"X-Relap-UserAgent"},{"pattern":"[A-Z][a-z-]+ [A-Za-z0-9]+","minLength":1,"required":1,"in":"header","type":"string","name":"Authorization"},{"name":"body","in":"body","required":1,"schema":{"type":"object","properties":{"algorithms":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"limit":{"type":"integer"}},"required":["id"]}},"illustrationType":{"enum":["original","standard","wide","ultraWide","square","vertical"]},"history":{"type":"array","items":{"maxItems":20,"format":"uri","type":"string"}},"url":{"format":"uri","type":"string"},"seed":{"type":"string"},"advBlocksCount":{"type":"integer"},"onlyAdsNeeded":{"type":"boolean"},"limit":{"type":"integer"}},"required":["url","limit"]}}],"operationId":"v3_rec_array","responses":{"400":{"description":"Bad Request"},"200":{"examples":{"application\/json":{"meta":{"rgid":"<rgid> \/\/(строка, обязательный)","count":"<count> \/\/(целое число, обязательный)"},"recs":[{"rid":"<rid> \/\/(строка, обязательный)","meta":"\/\/(объект, необязательный)","description":"<text> \/\/(текст, обязательный)","type":"recommendation \/\/(строка, обязательный)","url":"<url> \/\/(строка, обязательный)","imageUrl":"<imageUrl>  \/\/(строка, необязательный)","title":"<title> \/\/(строка, обязательный)"},{"rid":"<rid> \/\/(строка, обязательный)","meta":"\/\/(объект, необязательный)","description":"<text> \/\/(текст, обязательный)","imageUrl":"<imageUrl>  \/\/(строка, необязательный)","urlId":"<urlId> \/\/(строка, обязательный)","type":"advertisment \/\/(строка, обязательный)","url":"<url> \/\/(строка, обязательный)","title":"<title> \/\/(строка, обязательный)"}]}},"schema":{"type":"object","properties":{"meta":{"type":"object"},"recs":{"type":"array","items":{"properties":{"meta":{"type":"object","required":["rid"],"properties":{"rid":{"type":"string"}}},"url":{"format":"uri","type":"string"},"title":{"type":"string"},"thumbUrl":{"type":"string","format":"uri"},"description":{"type":"string"},"type":{"enum":["recommendation","promo","advertisement","exchange"]}},"required":["url","title","meta"],"type":"object"}}}},"description":""},"500":{"description":"Internal server error"},"401":{"description":"Authorization failed"}},"description":"curl -X POST -H 'Content-type:application\/json;' - -d \\\n    '{\n    \"limit\":\"3\",\n    \"illustrationType\":\"square\",\n    \"deviceInfo\":\n        {\n        \"deviceId\":\"KI9R7MPS740D3911\"\n        },\n    \"url\": \"http:\/\/surfingbird.ru\/surf\/15-tyuremnyh-fraz-kotorye-pozvolyayut-ponyat--se-K575A7\",\n    \"history\": [\"Dfv02b\",\"aIo94D\"]\n    }' https:\/\/relap.io\/rest\/v3\/recs\/?api_key=-mjeOg\n","summary":"get recommendations","x-mojo-to":"rest_api-v3#get_recs","produces":["application\/json"]}},"\/event":{"post":{"responses":{"202":{"examples":{"application\/json":{"status":"ok"}},"description":""},"400":{"description":"Bad Request"},"500":{"description":"Internal server error"},"401":{"description":"Authorization failed"}},"operationId":"v3_event","parameters":[{"in":"header","name":"X-Relap-Unique","type":"string","required":1,"minLength":1},{"format":"ipv4","required":1,"in":"header","type":"string","name":"X-Real-IP"},{"required":1,"name":"X-Relap-UserAgent","type":"string","in":"header"},{"in":"header","name":"Authorization","type":"string","pattern":"[A-Z][a-z-]+ [A-Za-z0-9]+","required":1,"minLength":1},{"schema":{"properties":{"url":{"type":"string","format":"uri"},"rgid":{"type":"string"},"type":{"enum":["hit","view","click","like","dislike","share","comment"],"type":"string"},"ts":{"pattern":"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?","type":"string"},"meta":{"type":"object"},"rid":{"type":"string"}},"required":["type","url"],"type":"object"},"required":1,"in":"body","name":"body"}],"produces":["application\/json"],"summary":"register new event","x-mojo-to":"rest_api-v3#event"}}},"produces":["application\/json"],"basePath":"\/rest\/v3","host":"irassadindev.relap.io","info":{"termsOfService":"https:\/\/relap.io\/terms","version":"3","title":"Relap Server2Server API"},"parameters":{"clientUserAgent":{"in":"header","name":"X-Relap-UserAgent","type":"string","required":1},"clientIP":{"format":"ipv4","required":1,"in":"header","type":"string","name":"X-Real-IP"},"uniqueID":{"type":"string","name":"X-Relap-Unique","in":"header","required":1,"minLength":1},"Authorization":{"minLength":1,"required":1,"pattern":"[A-Z][a-z-]+ [A-Za-z0-9]+","name":"Authorization","type":"string","in":"header"}},"schemes":["https"]}
